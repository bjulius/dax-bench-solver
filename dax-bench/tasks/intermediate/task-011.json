{
  "id": "task-011",
  "version": "1.0",
  "title": "Sales Summary by Category",
  "description": "Create a summary table of total sales by product category using SUMMARIZE and ADDCOLUMNS pattern.",
  "complexity": "intermediate",
  "category": "table-manipulation",
  "prompt": {
    "system": "You are a DAX expert. Generate only the DAX code without any explanation or markdown formatting. Return the table expression starting with the name followed by an equals sign.",
    "user": "Create a calculated table called 'Category Summary' that shows each product category with its total Net Price. The table should have two columns: Category and Total Sales.",
    "dataModelContext": "You are working with a sales database. Sales relates to Product via ProductKey. Product contains: Category (text - e.g., Audio, Computers, TV and Video). Sales contains: Net Price (decimal)."
  },
  "expectedOutput": {
    "dax": "Category Summary = ADDCOLUMNS(SUMMARIZE(Sales, Product[Category]), \"Total Sales\", CALCULATE(SUM(Sales[Net Price])))",
    "alternativeCorrect": [
      "Category Summary = SUMMARIZECOLUMNS(Product[Category], \"Total Sales\", SUM(Sales[Net Price]))",
      "Category Summary = ADDCOLUMNS(VALUES(Product[Category]), \"Total Sales\", CALCULATE(SUM(Sales[Net Price])))",
      "Category Summary = ADDCOLUMNS(ALL(Product[Category]), \"Total Sales\", CALCULATE(SUM(Sales[Net Price])))"
    ],
    "expectedResult": {
      "columns": ["Category", "Total Sales"],
      "rows": [
        {"Category": "Audio", "Total Sales": 13647440.58},
        {"Category": "Computers", "Total Sales": 41567230.12}
      ]
    }
  },
  "evaluationCriteria": {
    "syntaxWeight": 0.3,
    "outputMatchWeight": 0.7,
    "requiredElements": ["ADDCOLUMNS", "SUMMARIZE"],
    "partialCreditRules": [
      { "condition": "contains_SUMMARIZE", "credit": 0.3 },
      { "condition": "contains_ADDCOLUMNS", "credit": 0.3 },
      { "condition": "references_column_Category", "credit": 0.2 }
    ],
    "bestPractices": {
      "required": [],
      "preferred": ["SUMMARIZECOLUMNS", "ADDCOLUMNS"],
      "antiPatterns": ["nested_aggregation_in_summarize"]
    },
    "performanceNotes": "SUMMARIZECOLUMNS is preferred over SUMMARIZE+ADDCOLUMNS for better performance"
  },
  "hints": [
    "SUMMARIZE alone cannot contain aggregations - use ADDCOLUMNS to add calculated columns",
    "SUMMARIZECOLUMNS is a more efficient alternative that combines both operations"
  ],
  "tags": ["table", "summarize", "addcolumns", "table-manipulation", "contoso"]
}
