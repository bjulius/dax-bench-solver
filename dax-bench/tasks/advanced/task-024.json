{
  "id": "task-024",
  "version": "1.0",
  "title": "90th Percentile Order Value",
  "description": "Calculate a statistical percentile using PERCENTILEX.INC iterator function.",
  "complexity": "advanced",
  "category": "iterator",
  "prompt": {
    "system": "You are a DAX expert. Generate only the DAX code without any explanation or markdown formatting. Return the measure definition starting with the name followed by an equals sign.",
    "user": "Create a measure called 'P90 Order Value' that calculates the 90th percentile of Net Price across all sales transactions. This means 90% of orders have a Net Price at or below this value.",
    "dataModelContext": "You are working with a sales database. Sales contains: Order Number (integer), Line Number (integer), Net Price (decimal). Each row represents a line item in an order."
  },
  "expectedOutput": {
    "dax": "P90 Order Value = PERCENTILEX.INC(Sales, Sales[Net Price], 0.9)",
    "alternativeCorrect": [
      "P90 Order Value = PERCENTILEX.INC(ALL(Sales), Sales[Net Price], 0.9)",
      "P90 Order Value = VAR P90 = PERCENTILEX.INC(Sales, Sales[Net Price], 0.9) RETURN P90"
    ],
    "expectedResult": {
      "columns": ["P90 Order Value"],
      "rows": [
        {"P90 Order Value": 1250.00}
      ]
    }
  },
  "evaluationCriteria": {
    "syntaxWeight": 0.3,
    "outputMatchWeight": 0.7,
    "requiredElements": ["PERCENTILEX.INC"],
    "partialCreditRules": [
      { "condition": "contains_PERCENTILEX", "credit": 0.6 },
      { "condition": "references_column_Net Price", "credit": 0.2 }
    ],
    "bestPractices": {
      "required": [],
      "preferred": [],
      "antiPatterns": []
    },
    "dimensionWeights": {
      "correctness": 0.50,
      "bestPractices": 0.15,
      "performance": 0.20,
      "clarity": 0.15
    },
    "performanceNotes": "PERCENTILEX functions iterate over the table - consider performance on large datasets"
  },
  "hints": [
    "PERCENTILEX.INC uses inclusive percentile calculation",
    "The third parameter is the percentile as a decimal (0.9 = 90th percentile)",
    "INC includes the boundary value; EXC excludes it"
  ],
  "tags": ["measure", "percentilex", "statistics", "iterator", "advanced", "contoso"]
}
